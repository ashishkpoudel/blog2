<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Sapiensworks | Repository vs Everything Else</title>
  <meta name="description" content="Converting tech into business advantage">
  <meta name="author" content="Mike Mogosanu">
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:description" content="In-depth technical articles for developers who want to deliver more business value"/>
<meta name="twitter:title" content="SapiensWorks -  Repository vs Everything Else"/>
<meta name="twitter:site" content="@sapiensworks"/>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/gridlex/2.6.1/gridlex.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
 <!-- <link rel="alternate" type="application/atom+xml" title="Sapiensworks Articles" href="/feed.atom" /> -->
  <link rel="stylesheet"
  href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <link rel="stylesheet" href="/style.css">
  <script type='text/javascript' src='//platform-api.sharethis.com/js/sharethis.js#property=5a3b096e9d192f001374336b&product=sop' async='async'></script>
</head>
<body>
<header>
  <div class="grid-noGutter-middle">
    <div class="col-4_xs-12_sm-12" data-push-left="off-4_sm-0_xs-0">
      
          <h1 class="title">  <a href="/">  Sapiens Works </a> </h1>
      
      

      </div>
      
      <div class="col-3_xs-8_sm-8 text-center" data-push-left="off-1_xs-1_sm-1"><a href="https://twitter.com/sapiensworks">
        <span class="fa fa-twitter-square fa-2x"></span></a>
        <a href="https://github.com/sapiens">
        <span class="fa fa-github-square fa-2x"></span></a>
        <a href="http://stackoverflow.com/users/1017868/mikesw">
        <span class="fa fa-stack-overflow fa-2x"></span></a>
     <!--    <a href="/feed.atom">
        <span class="fa fa-rss-square fa-2x"></span></a> -->
      </div>
    
    
  </div>
  <div class="grid-middle-center-noGutter">
      <div class="col-3_xs-12_sm-12"><span class="tagline">Converting tech into business advantage</span></div>
    
    </div>
    
        <nav class="grid-center-noGutter-middle main-menu">
            
            <a href="/tags.html" class="col-1_xs-3_sm-3">
              <span>Topics</span>
            </a>
            <a href="/about.html" class="col-1_xs-3_sm-3">
              <span>About</span>
            </a>
            
         
            
          </nav>

    
    

 
  

  


  
</header>
<main>



 <article>
    <header>
      <h1><a href="/post/2013/01/18/Repository-vs-Document-Store-vs-Everything-Else.aspx">Repository vs Everything Else</a></h1>
      <div class="article-meta">
      <span>published on &nbsp; <b>18 January 2013</b></span> in <a href="/tags.html#Best practices">Best practices</a>
    </div>
    </header>
  <div class="post">
 
<p>Every once in a while someone tells me that the Repository is an anti-pattern because Ayende said so. Go see a demo of Entity Framework and voila, it does all the magic so you don't need a repository (of course, it assumes that EF entities are the domain entities but who cares about such trivial details, we're doing just CRUD apps anwyay).</p>
<p>I'll keep using this pattern for the following reasons (all together):</p>
<ol start="2">
<li>Any ORM or Document store or NoSql provider are closely coupled to a specific storage type. It can be RDBMS, it can be Key Value data store or document store etc, the point is any of those solutions serve a specific storage.</li>
<li>A repository hides the queries or whatever is required to work with a specific storage. The point is to tell the repository <strong>what</strong> to get, not <strong>how</strong> to get it.<br />
Once your repository returns an IQueryable, you're doing it wrong. The repository knows about business semantics and <strong>GetTopSellingProduct</strong> says more than a complicated Linq or Sql would do. It doesn't matter that <strong>TopSellingProduct</strong> is actually a view model, it does matter that the name tells something meaningful. Oh wait, it's not a Repository, it's DAO! Oh wait, it returns objects that have meaning for a higher layer. &quot;Yes, but they are simple DTOs, they have no behavior!!!&quot; Call it whatever you like, I find it annoying to say Repository <strong>only</strong> when I'm dealing with business objects and DAO when dealing with view models when the idea is the same. Let DAO be used when dealing with local CRUD applications and Repository when your application is designed using business semantics and doesn't care about how and where the things are persisted (after all, you can work with in memory, cached data). You know, when I'm asking the Repository for some view model, I consider the result a model for my view (it isn't just some data). And I don't really care how the storage persists it. I don't even care about <strong>where</strong> the repository takes the data from. Today is the local db, tomorrow is that web service. Bind your code to something from an ORM (or insert here your favourite data access object :) ) and you have more things to change.  Just KISS and use the Repository. It might upset Ayende or others but it will be easier for you to have maintainable code.</li>
</ol>

 </div>
 <footer>
   <div class="sharethis-inline-share-buttons"></div>

 <a class="previous" href="/post/2013/01/15/Domain-Driven-Design-Aggregate-Root-Modelling-Fallacy.aspx">&laquo; Previous</a> 
 <a class="next" href="/post/2013/01/24/Repository-Pattern-and-IQueryable.aspx">Next &raquo;</a>    
 </footer>
  </article>;

  <section id="comments">
  
      <div class="comments">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
      
            var disqus_shortname = 'sapiensworks';
      
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
      
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
      
        </section>
</main>
<footer>
    © 2018 SapiensWorks.com 
</footer>
<script>hljs.initHighlightingOnLoad();</script>
<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-2037614-18', 'auto');
		ga('send', 'pageview', {
		  'page': '/',
		  'title': ''
		});
	</script>
	<!-- End Google Analytics -->
</body>
</html>